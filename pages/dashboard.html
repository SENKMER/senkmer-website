<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Dashboard — Senkmer</title>
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
  <link rel="stylesheet" href="/css/theme.css">
</head>
<body>
  <header class="header"><div class="container inner"><a class="brand" href="/pages/hovedside/hjem.html"><img src="/assets/logo.svg" width="36"> <span class="title">Senkmer</span></a></div></header>
  <main class="container section">
    <h1>Dashbord</h1>
    <p class="muted">Oversikt over fremgang, XP og mål.</p>
    <div class="grid-2">
      <div class="card">
        <h3>Fremgang</h3>
        <p>Daglig streak: <strong id="streak">0</strong></p>
        <p>Totalt XP: <strong id="xp-total">0</strong></p>
        <p>Nivå: <strong id="level">1</strong></p>
      </div>
      <div class="card">
        <h3>Badges</h3>
        <ul id="badge-list" class="list"></ul>
        <div id="badge-empty" class="muted">Ingen badges enda.</div>
      </div>
      <div class="card">
        <h3>Dagens mål</h3>
        <div class="card">Fullfør en modul for ekstra belønning</div>
      </div>
    </div>
  </main>
  <footer class="footer"><div class="container">© <span id="year"></span> Senkmer</div></footer>
  <script src="/js/main.js"></script>
  <script src="/js/game.js"></script>
  <script src="/js/animations.js"></script>
  <script>
    (function(){
      const api = window.SenkmerAPI;
      const token = localStorage.getItem('senkmer_token');
      const xpEl = document.getElementById('xp-total');
      const lvlEl = document.getElementById('level');
      const streakEl = document.getElementById('streak');
      const badgeList = document.getElementById('badge-list');
      const badgeEmpty = document.getElementById('badge-empty');
      let lastLevel = Number(lvlEl.textContent)||1;
      async function load(){
        if(!token) return;
        const p = await api.getProgress(token);
        const xp = p?.xp || 0;
        xpEl.textContent = xp;
        streakEl.textContent = p?.streak || 0;
        const lvl = Math.min(100, Math.floor(xp/100)+1);
        lvlEl.textContent = lvl;
        if(window.confetti && lvl > lastLevel){ window.confetti(lvlEl.parentElement); lastLevel = lvl; }

        const badges = await api.badges.list(token);
        badgeList.innerHTML = '';
        if(!badges || !badges.length){ badgeEmpty.style.display='block'; } else { badgeEmpty.style.display='none'; }
        badges.forEach(b=>{
          const li = document.createElement('li');
          li.className = 'list-item';
          const icon = document.createElement('img');
          icon.src = '/assets/star-icon.svg';
          icon.width = 16;
          icon.height = 16;
          icon.style.marginRight = '6px';
          li.appendChild(icon);
          li.appendChild(document.createTextNode(b.name));
          badgeList.appendChild(li);
        });
      }
      load();
    })();
  </script>
</body>
</html>